<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8"/>
    <title>Пользователь</title>

    <script>
        function getUserById() {
            const userIdTextBox = document.getElementById('userIdTextBox');
            const id = userIdTextBox.value;
            fetch('api/user/' + id).then((response) => {
                return response.json();
            }).then((data) => {
                document.getElementById('userDataId').innerHTML = data.id;
                document.getElementById('userDataName').innerHTML = data.name;
                document.getElementById('userDataLogin').innerHTML = data.login;
                document.getElementById('userDataPassword').innerHTML = data.password;
                document.getElementById('userDataRoles').innerHTML = data.roles.map(role => role.role).join(", ");;
            });
        }
    </script>
</head>


<div style="width:700; margin:0 auto;">
    <br/>

    <h4 style="text-align:center;">Получить пользователя по id</h4>
    <div style="width:300; margin:0 auto;">
        <input style="width:300; height:40; margin:0 auto;" type="text" id="userIdTextBox" value="3" placeholder="Введите id пользователя">
        <br/>
        <button style="width:300; height:40; margin:0 auto;" onclick="getUserById()">Получить</button>
    </div>

    <br/>

    <table style="margin:0 auto;" border="1" class="users">
        <thead bgcolor="lightGray">
        <tr height="45">
            <td style="width:50; text-align:center">Id</td>
            <td style="width:200; text-align:center">Имя</td>
            <td style="width:100; text-align:center">Логин</td>
            <td style="width:100; text-align:center">Пароль</td>
            <td style="width:150; text-align:center">Роли</td>
        </tr>
        </thead>


        <tbody>
        <tr height="45" th:each="user : ${users}">
            <td>
                <p th:text="${user.id}">1</p>
            </td>
            <td>
                <p th:text="${user.name}">John Doe</p>
            </td>
            <td>
                <p th:text="${user.login}">sa</p>
            </td>
            <td>
                <p th:text="${user.password}">sa</p>
            </td>
            <td>
                <p th:text="${#strings.arrayJoin(user.roles, ',')}">user</p>
            </td>
        </tr>
        </tbody>
    </table>
</div>

<br/><br/><br/>

<div style="width:700; margin:0 auto;">
    <h4 style="text-align:center;">Случайный пользователь</h4>
    <br/>
    <table style="margin:0 auto;" border="1">
        <thead bgcolor="lightGray">
        <tr height="45">
            <td style="width:50; text-align:center">Id</td>
            <td style="width:200; text-align:center">Имя</td>
            <td style="width:100; text-align:center">Логин</td>
            <td style="width:100; text-align:center">Пароль</td>
            <td style="width:150; text-align:center">Роли</td>
        </tr>
        </thead>
        <tbody>
        <#if randomUser??>
        <tr height="45">
            <td>
                <p>${randomUser.id}</p>
            </td>
            <td>
                <p>${randomUser.name}</p>
            </td>
            <td>
                <p>${randomUser.login}</p>
            </td>
            <td>
                <p>${randomUser.password}</p>
            </td>
            <td>
                <p>${randomUser.roles?map(r -> r.role)?join(", ")}</p>
            </td>
        </tr>
        </#if>
        </tbody>
    </table>
</div>
</body>
</html>